(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ecf62742"],{"0e09":function(t,e,a){t.exports=a.p+"img/feather-sprite.5113e3a1.svg"},1941:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"users"}},[a("div",{staticClass:"dashboardContent"},[a("UserRegistry")],1)])},s=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"usersRegistry"}},[a("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("p",[t._v("Para añadir un miembro a tu proyecto, ya debe de estar registrado en la plataforma: escribe su nombre de usuario")]),a("br"),a("br"),a("div",{staticClass:"input-group mb-3"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control form-control-lg",attrs:{type:"text",placeholder:"Escribe el @user del usuario","aria-describedby":"basic-addon1"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])]),a("div",{staticClass:"modal-footer",staticStyle:{border:"none"}},[a("button",{staticClass:"btn btn-info",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancelar")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#invitationModal"},on:{click:t.proposeAnUserWithSearch}},[t._v("Buscar usuario")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"invitationModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(2),a("div",{staticClass:"modal-body"},[a("p",[t._v("Asegúrate de que conoces a esta persona antes de enviarle una invitación a participar de tu idea.")]),a("br"),a("h4",{staticStyle:{"text-align":"center"},domProps:{textContent:t._s(t.UserNameInvited)}})]),a("div",{staticClass:"modal-footer",staticStyle:{border:"none"}},[a("button",{staticClass:"btn btn-info",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancelar")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.sendInvitationToSelectedUser}},[t._v("Enviar invitación")])])])])]),t._m(3),t._m(4)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header",staticStyle:{border:"none"}},[a("h5",{staticClass:"modal-title"},[t._v("¿Quién trabaja contigo?")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[t._v("@")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header",staticStyle:{border:"none"}},[a("h5",{staticClass:"modal-title"},[t._v("Enviar invitación")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"usersListTable",attrs:{id:"usersListTable"}},[a("h6",[t._v("Usuarios en tu proyecto")]),a("table",{staticClass:"table"},[a("thead",{staticClass:"thead-dark"},[a("tr",{staticStyle:{"font-size":"14px"}},[a("th",{attrs:{scope:"col"}},[t._v("Nombre")]),a("th",{attrs:{scope:"col"}},[t._v("Usuario")]),a("th",{attrs:{scope:"col"}},[t._v("Rol")])])]),a("tbody",{attrs:{id:"projectUsersField"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bannerNonUsers",attrs:{id:"bannerNonUsers"}},[a("div",[a("h3",[t._v("Invita a más personas a tu proyecto")]),a("p",[t._v("Puedes agregar a más usuarios en el proyecto si conoces su nombre de usuario.")]),a("button",{staticClass:"btn btn-success btn-sm",attrs:{"data-toggle":"modal","data-target":"#exampleModal"}},[t._v("Invitar a alguien")])])])}],o=(a("386d"),a("6b54"),a("7f7f"),a("ac6a"),a("8aa5")),c=a.n(o),l=(a("f880"),a("e010")),u={data:function(){return{search:"",UserNameInvited:"",UserInvited:""}},mounted:function(){this.getUsersOnThisProject()},mixins:[l["a"]],methods:{getUsersOnThisProject:function(){var t=this.$router.history.current.params["projectId"];c.a.firestore().collection("projects").doc(t).collection("members").get().then(function(t){if(console.log(t.docs.length),t.docs.length>=1){var e=document.getElementById("usersListTable"),a=document.getElementById("projectUsersField");e.style.display="block",t.forEach(function(t){a.insertAdjacentHTML("beforeend","\n                <tr>\n                  <td>".concat(t.data()["name"],"</td>\n                  <td>").concat(t.data()["user"]?"@"+t.data()["user"]:"No tiene un usuario","</td>\n                  <td>").concat(t.data()["role"]?t.data()["role"]:"No tiene rol asignado","</td>\n                </tr>\n              "))})}if(0==t.docs.length){var n=document.getElementById("bannerNonUsers");n.style.display="block"}})},proposeAnUserWithSearch:function(){var t=this;c.a.firestore().collection("users").get().then(function(e){e.forEach(function(e){t.search.toString()==e.data()["user"]&&(t.UserInvited=e.data()["user"],t.enableNewMemberInvitationCard(e.data()["name"]))})})},enableNewMemberInvitationCard:function(t){this.UserNameInvited=t},sendInvitationToSelectedUser:function(){var t=this;c.a.firestore().collection("users").get().then(function(e){e.docs.forEach(function(e){if(e.data()["user"]==t.UserInvited){var a=e.id,n=t.$router.history.current.params["projectId"];c.a.firestore().collection("projects").doc(n).get().then(function(e){t.addActivityPoint(),c.a.firestore().collection("users").doc(a).collection("invitations").doc(n).set({pname:e.data()["shortName"]})})}})})}}},d=u,f=a("2877"),h=Object(f["a"])(d,i,r,!1,null,null,null),v=h.exports,m=a("8280"),p=a("e7b4"),g=(a("8f3a"),{components:{UserRegistry:v,LateralPanel:m["a"],BurgerMenu:p["a"]},created:function(){"undefined"==this.$router.history.current.params["projectId"]&&this.$router.push("/dashboard/select")}}),b=g,y=Object(f["a"])(b,n,s,!1,null,null,null);e["default"]=y.exports},"2bff":function(t,e,a){},"365b":function(t,e,a){},"386d":function(t,e,a){"use strict";var n=a("cb7c"),s=a("83a1"),i=a("5f1b");a("214f")("search",1,function(t,e,a,r){return[function(a){var n=t(this),s=void 0==a?void 0:a[e];return void 0!==s?s.call(a,n):new RegExp(a)[e](String(n))},function(t){var e=r(a,t,this);if(e.done)return e.value;var o=n(t),c=String(this),l=o.lastIndex;s(l,0)||(o.lastIndex=0);var u=i(o,c);return s(o.lastIndex,l)||(o.lastIndex=l),null===u?-1:u.index}]})},"5e6a":function(t,e,a){t.exports=a.p+"img/logo-white-cutted.caf3a5ce.svg"},"66aa":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"headerProfile"},[n("div",{staticClass:"profileWrapper"},[n("div",{staticClass:"profileData"},[n("div",{staticClass:"profileContent"},[n("img",{staticClass:"profilePicture",attrs:{src:t.urlPhotoPath}})]),n("div",{staticClass:"profileIdentity"},[n("span",{staticClass:"profileName text-white"},[t._v("Hola, "+t._s(this.currentAccount.nickname))])])]),n("div",{staticClass:"profileOptions"},[n("router-link",{attrs:{to:"/account/configuration"}},[n("svg",{staticClass:"feather-menu"},[n("use",{attrs:{"xlink:href":a("0e09")+"#settings"}})])]),n("a",{staticStyle:{"margin-left":"7px"},attrs:{href:"#","data-toggle":"tooltip","data-placement":"top",title:"Cerrar sesión"},on:{click:t.closeSession}},[n("svg",{staticClass:"feather-red"},[n("use",{attrs:{"xlink:href":a("0e09")+"#log-out"}})])])],1)])])},s=[],i=a("8aa5"),r=a.n(i),o=(a("984e"),a("365b"),{data:function(){return{urlPhotoPath:"",currentAccount:{nickname:"",username:""}}},created:function(){this.setProfilePicture(),this.setIdentityData(),this.checkExistentIdentity()},methods:{setProfilePicture:function(){var t=this;r.a.auth().onAuthStateChanged(function(e){r.a.storage().ref("profile_photos/".concat(e.uid)).getDownloadURL().then(function(e){return t.urlPhotoPath=e})})},setIdentityData:function(){var t=this;r.a.auth().onAuthStateChanged(function(e){r.a.firestore().collection("users").doc(e.uid).get().then(function(e){t.currentAccount.nickname=e.data()["nickname"],t.currentAccount.username=e.data()["user"]})})},checkExistentIdentity:function(){var t=this;setTimeout(function(){""!=t.currentAccount.nickname&&void 0!=t.currentAccount.nickname&&null!=t.currentAccount.nickname||t.$router.push("/register/nickname"),""!=t.currentAccount.username&&void 0!=t.currentAccount.username&&null!=t.currentAccount.username||t.$router.push("/register/info")},4e3)},closeSession:function(){r.a.auth().signOut(),window.location="/"}}}),c=o,l=a("2877"),u=Object(l["a"])(c,n,s,!1,null,null,null);e["a"]=u.exports},"7f7f":function(t,e,a){var n=a("86cc").f,s=Function.prototype,i=/^\s*function ([^ (]*)/,r="name";r in s||a("9e1e")&&n(s,r,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},8280:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"headerMenu"},[t._m(0),n("div",{staticClass:"headerWrapperRight"},[n("a",{staticClass:"headerMenuButton",on:{click:t.openOverlayMenu}},[n("svg",{staticClass:"feather-light"},[n("use",{attrs:{"xlink:href":a("0e09")+"#menu"}})])])])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"headerWrapper"},[n("div",{staticClass:"headerBrand"},[n("img",{attrs:{src:a("5e6a"),width:"142px"}})]),n("div",{staticClass:"headerSearch"},[n("input",{staticClass:"form-control-navbar inputSearch",attrs:{type:"text",placeholder:"Buscar en tus proyectos..."}})])])}],i=a("8aa5"),r=a.n(i),o=(a("2bff"),a("365b"),a("66aa")),c=a("e7b4"),l={data:function(){return{activeProjects:"",currentProjectName:"",usersPath:"",feedPath:"",boardPath:"",goalsPath:"",invitations:""}},components:{Profile:o["a"],BurgerMenu:c["a"]},methods:{getAndSetActiveProjects:function(){var t=this;r.a.auth().onAuthStateChanged(function(e){r.a.firestore().collection("users").doc(e.uid).collection("projects").get().then(function(e){t.activeProjects=e.docs.length})})},setInvitationsNumber:function(){var t=this;r.a.auth().onAuthStateChanged(function(e){r.a.firestore().collection("users").doc(e.uid).collection("invitations").get().then(function(e){if(e.docs.length>0){t.invitations=e.docs.length;var a=document.getElementById("invitationsLink"),n=document.getElementById("invitationsIcon");a.style.color="#FF524C",n.style.stroke="#FF524C"}})})},openOverlayMenu:function(){document.getElementById("overlayMenu").classList.toggle("show")}}},u=l,d=a("2877"),f=Object(d["a"])(u,n,s,!1,null,null,null);e["a"]=f.exports},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"8f3a":function(t,e,a){},"984e":function(t,e,a){},e010:function(t,e,a){"use strict";a.d(e,"a",function(){return i});var n=a("8aa5"),s=a.n(n),i={methods:{addActivityPoint:function(){var t=this,e=new Date,a="".concat(e.getUTCDate()).concat(e.getMonth()).concat(e.getFullYear());s.a.firestore().collection("projects").doc(this.$route.params.projectId).collection("dates").doc(a).get().then(function(e){var n=void 0===e.data()||NaN===e.data()?0:e.data()["activityPoints"];t.setActivityPoint(a,n)})},setActivityPoint:function(t,e){s.a.firestore().collection("projects").doc(this.$route.params.projectId).collection("dates").doc(t).set({activityPoints:e+1})}}}},e7b4:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"menu"},on:{click:t.openMenu}},[n("svg",{staticClass:"feather-light"},[n("use",{attrs:{"xlink:href":a("0e09")+"#menu"}})])])},s=[],i={methods:{openMenu:function(){var t=document.getElementById("sidebarMenu"),e=document.getElementById("drawable");t.classList.remove("headerMenu"),t.classList.add("headerMobileMenu"),e.style.display="block"}}},r=i,o=a("2877"),c=Object(o["a"])(r,n,s,!1,null,null,null);e["a"]=c.exports},f880:function(t,e,a){}}]);
//# sourceMappingURL=chunk-ecf62742.73ece6ea.js.map