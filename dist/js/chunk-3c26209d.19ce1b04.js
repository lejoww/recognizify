(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c26209d"],{"01de":function(t,e,a){t.exports=a.p+"img/logo-common-cutted.5b742780.png"},"0e09":function(t,e,a){t.exports=a.p+"img/feather-sprite.5113e3a1.svg"},"122a":function(t,e,a){},"39d4":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"publicProfileLayout"},[i("div",{staticClass:"alert alert-primary successAlert",attrs:{id:"successAlert",role:"alert"}},[t._v("\n        La invitación ha sido correctamente enviada\n    ")]),i("SendInvitationModal",{attrs:{profileId:t.user.id}}),t._m(0),i("a",{staticStyle:{display:"flex",margin:"0.5rem 0 0 1.5rem"},attrs:{href:"javascript: history.go(-1)"}},[i("svg",{staticClass:"feather-dark"},[i("use",{attrs:{"xlink:href":a("0e09")+"#arrow-left"}})]),i("span",{staticStyle:{"font-weight":"900","letter-spacing":"-0.6px"}},[t._v("Volver atrás")])]),i("div",{staticClass:"publicProfileBase"},[i("div",{staticClass:"publicProfileContent"},[i("div",{staticClass:"profilePhotoImage"},[i("img",{attrs:{src:t.user.url}})]),i("div",{staticClass:"profileDescription"},[i("span",{staticClass:"publicProfileInd"},[t._v("Perfil de usuario")]),i("h1",{staticStyle:{"letter-spacing":"-1px"}},[t._v(t._s(t.user.name))]),i("span",{staticClass:"profileUsername"},[t._v("@"+t._s(t.user.user))]),i("div",{staticClass:"profileBiography"},[i("span",{staticStyle:{"font-weight":"700"}},[t._v("Biografía")]),i("p",[t._v(t._s(t.user.bio))])]),i("br"),t.invitationIsAvailable?i("button",{staticClass:"btn btn-primary",attrs:{"data-toggle":"modal","data-target":"#invitationModal"}},[t._v("Invitar a un proyecto")]):t._e()])]),t._m(1)])],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"publicProfileBrand"},[i("img",{attrs:{src:a("01de"),width:"189px"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"publicProfileContentNotAvailable"},[i("img",{staticClass:"publicProfileContentNotAvailableImage",attrs:{src:a("9a4c")}}),i("h3",{staticStyle:{color:"#9e95aa"}},[t._v("No falta mucho para que conozcas más a esta persona")]),i("p",{staticStyle:{color:"#9e95aa"}},[t._v("Aquí en unos días, aparecerán datos interesantes de esta persona.")])])}],o=(a("7f7f"),a("8aa5")),s=a.n(o),r=(a("4105"),a("f365")),c=a.n(r),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade hide",attrs:{id:"invitationModal",tabindex:"-1",role:"dialog","aria-labelledby":"invitationModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[t.currentUserProjects.length>=1?a("div",[a("span",[t._v("Enviar invitación para:")]),t._l(t.currentUserProjects,function(e){return a("div",{key:e,staticClass:"card projectCard"},[a("button",{on:{click:function(a){return t.sendInvitationToSelectedUser(e.id)}}},[t._v(t._s(e.name))])])})],2):a("div",[a("p",[t._v("Parece que aún no tienes proyectos o no has iniciado sesión")]),a("a",{staticClass:"btn btn-primary",attrs:{href:"/signin"}},[t._v("Inicia sesión")])])]),t._m(1)])])])},d=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header",staticStyle:{border:"none"}},[a("h3",{staticClass:"modal-title modalTitle"},[t._v("Invita a este usuario a un proyecto")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-footer",staticStyle:{border:"none"}},[a("button",{staticClass:"btn btn-info",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancelar")])])}],u=(a("ac6a"),a("122a"),a("e010")),f={data:function(){return{currentUserProjects:[]}},props:["profileId"],created:function(){this.getCurrentUserProjects()},mixins:[u["a"]],methods:{getCurrentUserProjects:function(){var t=this;s.a.firestore().collection("projects").get().then(function(e){e.forEach(function(e){s.a.firestore().collection("projects").doc(e.id).collection("members").get().then(function(a){a.forEach(function(a){a.id==s.a.auth().currentUser.uid&&t.currentUserProjects.push({name:e.data()["name"],id:e.id})})}).catch(function(t){console.log("error en la obtenciòn de miembros "+t)})})}).catch(function(t){console.log("error en la obtenciòn de proyectos "+t)})},sendInvitationToSelectedUser:function(t){var e=this;s.a.auth().onAuthStateChanged(function(a){e.profileId==a.uid?alert("No puedes invitarte tu mismo a un proyecto"):s.a.firestore().collection("projects").doc(t).get().then(function(i){s.a.firestore().collection("users").doc(a.uid).get().then(function(a){s.a.firestore().collection("users").doc(e.profileId).collection("invitations").doc(t).set({pname:i.data()["shortName"],pdescription:i.data()["description"],pinvite:a.data()["name"]}).then(function(){$("#invitationModal").modal("hide"),document.getElementById("successAlert").style.display="block"}).catch(function(t){return console.log(t)})})})})}}},p=f,v=a("2877"),m=Object(v["a"])(p,l,d,!1,null,null,null),h=m.exports,g={data:function(){return{user:{name:"",user:"",bio:"",id:""},invitationIsAvailable:!1}},components:{SendInvitationModal:h},created:function(){this.getUserData()},methods:{getUserData:function(){var t=this;s.a.firestore().collection("users").where("user","==",this.$route.params.username).get().then(function(e){e.empty||s.a.storage().ref("/profile_photos/".concat(e.docs[0].id)).getDownloadURL().then(function(a){t.user={name:e.docs[0].data()["name"],user:e.docs[0].data()["user"],bio:e.docs[0].data()["bio"],url:a,id:e.docs[0].id},t.checkIfInvitationIsAvailable()}).catch(function(){t.user={name:e.docs[0].data()["name"],user:e.docs[0].data()["user"],bio:e.docs[0].data()["bio"],url:c.a,id:e.docs[0].id},t.checkIfInvitationIsAvailable()})})},checkIfInvitationIsAvailable:function(){var t=this;s.a.auth().onAuthStateChanged(function(e){t.user.id==e.uid?t.invitationIsAvailable=!1:t.invitationIsAvailable=!0})}}},b=g,_=Object(v["a"])(b,i,n,!1,null,null,null);e["default"]=_.exports},4105:function(t,e,a){},"7f7f":function(t,e,a){var i=a("86cc").f,n=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in n||a("9e1e")&&i(n,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},"9a4c":function(t,e,a){t.exports=a.p+"img/nothing.26c4b763.png"},e010:function(t,e,a){"use strict";a.d(e,"a",function(){return o});var i=a("8aa5"),n=a.n(i),o={methods:{addActivityPoint:function(){var t=this,e=new Date,a="".concat(e.getUTCDate()).concat(e.getMonth()).concat(e.getFullYear());n.a.firestore().collection("projects").doc(this.$route.params.projectId).collection("dates").doc(a).get().then(function(e){var i=void 0==e.data()?0:e.data()["activityPoints"];t.setActivityPoint(a,i)})},setActivityPoint:function(t,e){n.a.firestore().collection("projects").doc(this.$route.params.projectId).collection("dates").doc(t).set({activityPoints:e+1,date:n.a.firestore.Timestamp.fromDate(new Date)}).then(function(){return window.location.reload()})}}}},f365:function(t,e,a){t.exports=a.p+"img/profile.f2fd1390.png"}}]);
//# sourceMappingURL=chunk-3c26209d.19ce1b04.js.map